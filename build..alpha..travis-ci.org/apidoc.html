<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://github.com/tautologistics/node-htmlparser"

    >htmlparser (v1.7.7)</a>
</h1>
<h4>Forgiving HTML/XML/RSS Parser in JS for *both* Node and Browsers</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser">module htmlparser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler">
            function <span class="apidocSignatureSpan">htmlparser.</span>DefaultHandler
            <span class="apidocSignatureSpan">(callback, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser">
            function <span class="apidocSignatureSpan">htmlparser.</span>Parser
            <span class="apidocSignatureSpan">(handler, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.RssHandler">
            function <span class="apidocSignatureSpan">htmlparser.</span>RssHandler
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.</span>DefaultHandler.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.</span>DomUtils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.</span>ElementType</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.</span>Parser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.</span>RssHandler.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.</span>node_htmlparser</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.DefaultHandler">module htmlparser.DefaultHandler</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.DefaultHandler">
            function <span class="apidocSignatureSpan">htmlparser.</span>DefaultHandler
            <span class="apidocSignatureSpan">(callback, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.DefaultHandler.</span>_emptyTags</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.DefaultHandler.</span>reWhitespace</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.DefaultHandler.prototype">module htmlparser.DefaultHandler.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>_done</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.done">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>done
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.error">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>error
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.handleCallback">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>handleCallback
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.handleElement">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>handleElement
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.isEmptyTag">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>isEmptyTag
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.reset">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>reset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeComment">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeComment
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeDirective">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeDirective
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeTag">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeTag
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeText">
            function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeText
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>_callback</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>_options</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>_tagStack</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>dom</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.DomUtils">module htmlparser.DomUtils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DomUtils.getElementById">
            function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElementById
            <span class="apidocSignatureSpan">(id, currentElement, recurse)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DomUtils.getElements">
            function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElements
            <span class="apidocSignatureSpan">(options, currentElement, recurse, limit)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DomUtils.getElementsByTagName">
            function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElementsByTagName
            <span class="apidocSignatureSpan">(name, currentElement, recurse, limit)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DomUtils.getElementsByTagType">
            function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElementsByTagType
            <span class="apidocSignatureSpan">(type, currentElement, recurse, limit)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.DomUtils.testElement">
            function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>testElement
            <span class="apidocSignatureSpan">(options, element)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.Parser">module htmlparser.Parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.Parser">
            function <span class="apidocSignatureSpan">htmlparser.</span>Parser
            <span class="apidocSignatureSpan">(handler, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.</span>_reAttrib</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.</span>_reTagName</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.</span>_reTags</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.</span>_reTrim</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.</span>_reTrimComment</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.</span>_reWhitespace</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.Parser.prototype">module htmlparser.Parser.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_done</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.done">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>done
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.getLocation">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>getLocation
            <span class="apidocSignatureSpan">(startTag)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.handleError">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>handleError
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.parseAttribs">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseAttribs
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.parseChunk">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseChunk
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.parseComplete">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseComplete
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.parseTagAttribs">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseTagAttribs
            <span class="apidocSignatureSpan">(elements)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.parseTagName">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseTagName
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.parseTags">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseTags
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.reset">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>reset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.validateHandler">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>validateHandler
            <span class="apidocSignatureSpan">(handler)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.Parser.prototype.writeHandler">
            function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>writeHandler
            <span class="apidocSignatureSpan">(forceFlush)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_current</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_elementsCurrent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_next</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_buffer</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_elements</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_handler</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_location</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_options</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_tagStack</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_parseState</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>_prevTagSep</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.RssHandler">module htmlparser.RssHandler</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.RssHandler.RssHandler">
            function <span class="apidocSignatureSpan">htmlparser.</span>RssHandler
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.RssHandler.super_">
            function <span class="apidocSignatureSpan">htmlparser.RssHandler.</span>super_
            <span class="apidocSignatureSpan">(callback, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.RssHandler.prototype">module htmlparser.RssHandler.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.RssHandler.prototype.constructor">
            function <span class="apidocSignatureSpan">htmlparser.RssHandler.prototype.</span>constructor
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.RssHandler.prototype.done">
            function <span class="apidocSignatureSpan">htmlparser.RssHandler.prototype.</span>done
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.htmlparser.node_htmlparser">module htmlparser.node_htmlparser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.node_htmlparser.DefaultHandler">
            function <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>DefaultHandler
            <span class="apidocSignatureSpan">(callback, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.node_htmlparser.Parser">
            function <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>Parser
            <span class="apidocSignatureSpan">(handler, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.htmlparser.node_htmlparser.RssHandler">
            function <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>RssHandler
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>DomUtils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>ElementType</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser" id="apidoc.module.htmlparser">module htmlparser</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler" id="apidoc.element.htmlparser.DefaultHandler">
        function <span class="apidocSignatureSpan">htmlparser.</span>DefaultHandler
        <span class="apidocSignatureSpan">(callback, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler(callback, options) {
	this.reset();
	this._options = options ? options : { };
	if (this._options.ignoreWhitespace == undefined)
		this._options.ignoreWhitespace = false; //Keep whitespace-only text nodes
	if (this._options.verbose == undefined)
		this._options.verbose = true; //Keep data property for tags and raw property for all
	if (this._options.enforceEmptyTags == undefined)
		this._options.enforceEmptyTags = true; //Don&#x27;t allow children for HTML tags defined as empty in spec
	if ((typeof callback) == &#x22;function&#x22;)
		this._callback = callback;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
View runtests.html in any browser

##Usage In Node

```javascript
var htmlparser = require(&#x22;htmlparser&#x22;);
var rawHtml = &#x22;Xyz &#x3c;script language= javascript&#x3e;var foo = &#x27;&#x3c;&#x3c;bar&#x3e;&#x3e;&#x27;;&#x3c; /  script
&#x3e;&#x3c;!--&#x3c;!-- Waah! -- --&#x3e;&#x22;;
var handler = new htmlparser.<span class="apidocCodeKeywordSpan">DefaultHandler</span>(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.Parser(handler);
parser.parseComplete(rawHtml);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser" id="apidoc.element.htmlparser.Parser">
        function <span class="apidocSignatureSpan">htmlparser.</span>Parser
        <span class="apidocSignatureSpan">(handler, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(handler, options) {
	this._options = options ? options : { };
	if (this._options.includeLocation == undefined) {
		this._options.includeLocation = false; //Do not track element position in document by default
	}

	this.validateHandler(handler);
	this._handler = handler;
	this.reset();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var rawHtml = &#x22;Xyz &#x3c;script language= javascript&#x3e;var foo = &#x27;&#x3c;&#x3c;bar&#x3e;&#x3e;&#x27;;&#x3c; /  script
&#x3e;&#x3c;!--&#x3c;!-- Waah! -- --&#x3e;&#x22;;
var handler = new htmlparser.DefaultHandler(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.<span class="apidocCodeKeywordSpan">Parser</span>(handler);
parser.parseComplete(rawHtml);
sys.puts(sys.inspect(handler.dom, false, null));
```

##Usage In Browser

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.RssHandler" id="apidoc.element.htmlparser.RssHandler">
        function <span class="apidocSignatureSpan">htmlparser.</span>RssHandler
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RssHandler(callback) {
	RssHandler.super_.call(this, callback, { ignoreWhitespace: true, verbose: false, enforceEmptyTags: false });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
parser.done();	
```

##Parsing RSS/Atom Feeds

```javascript
new htmlparser.<span class="apidocCodeKeywordSpan">RssHandler</span>(function (error, dom) {
	...
});
```

##DefaultHandler Options

###Usage
...</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.DefaultHandler" id="apidoc.module.htmlparser.DefaultHandler">module htmlparser.DefaultHandler</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.DefaultHandler" id="apidoc.element.htmlparser.DefaultHandler.DefaultHandler">
        function <span class="apidocSignatureSpan">htmlparser.</span>DefaultHandler
        <span class="apidocSignatureSpan">(callback, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler(callback, options) {
	this.reset();
	this._options = options ? options : { };
	if (this._options.ignoreWhitespace == undefined)
		this._options.ignoreWhitespace = false; //Keep whitespace-only text nodes
	if (this._options.verbose == undefined)
		this._options.verbose = true; //Keep data property for tags and raw property for all
	if (this._options.enforceEmptyTags == undefined)
		this._options.enforceEmptyTags = true; //Don&#x27;t allow children for HTML tags defined as empty in spec
	if ((typeof callback) == &#x22;function&#x22;)
		this._callback = callback;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
View runtests.html in any browser

##Usage In Node

```javascript
var htmlparser = require(&#x22;htmlparser&#x22;);
var rawHtml = &#x22;Xyz &#x3c;script language= javascript&#x3e;var foo = &#x27;&#x3c;&#x3c;bar&#x3e;&#x3e;&#x27;;&#x3c; /  script
&#x3e;&#x3c;!--&#x3c;!-- Waah! -- --&#x3e;&#x22;;
var handler = new htmlparser.<span class="apidocCodeKeywordSpan">DefaultHandler</span>(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.Parser(handler);
parser.parseComplete(rawHtml);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.DefaultHandler.prototype" id="apidoc.module.htmlparser.DefaultHandler.prototype">module htmlparser.DefaultHandler.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.done" id="apidoc.element.htmlparser.DefaultHandler.prototype.done">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>done
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$done() {
		this._done = true;
		this.handleCallback(null);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
##Streaming To Parser

```javascript
while (...) {
	...
	parser.parseChunk(chunk);
}
parser.<span class="apidocCodeKeywordSpan">done</span>();	
```

##Parsing RSS/Atom Feeds

```javascript
new htmlparser.RssHandler(function (error, dom) {
	...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.error" id="apidoc.element.htmlparser.DefaultHandler.prototype.error">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>error
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$error(error) {
		this.handleCallback(error);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.handleCallback" id="apidoc.element.htmlparser.DefaultHandler.prototype.handleCallback">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>handleCallback
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$handleCallback(error) {
			if ((typeof this._callback) != &#x22;function&#x22;)
				if (error)
					throw error;
				else
					return;
			this._callback(error, this.dom);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.handleElement" id="apidoc.element.htmlparser.DefaultHandler.prototype.handleElement">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>handleElement
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$handleElement(element) {
		if (this._done)
			this.handleCallback(new Error(&#x22;Writing to the handler after done() called is not allowed without a reset()&#x22;));
		if (!this._options.verbose) {
//			element.raw = null; //FIXME: Not clean
			//FIXME: Serious performance problem using delete
			delete element.raw;
			if (element.type == &#x22;tag&#x22; || element.type == &#x22;script&#x22; || element.type == &#x22;style&#x22;)
				delete element.data;
		}
		if (!this._tagStack.last()) { //There are no parent elements
			//If the element can be a container, add it to the tag stack and the top level list
			if (element.type != ElementType.Text &#x26;&#x26; element.type != ElementType.Comment &#x26;&#x26; element.type != ElementType.Directive) {
				if (element.name.charAt(0) != &#x22;/&#x22;) { //Ignore closing tags that obviously don&#x27;t have an opening tag
					this.dom.push(element);
					if (!this.isEmptyTag(element)) { //Don&#x27;t add tags to the tag stack that can&#x27;t have children
						this._tagStack.push(element);
					}
				}
			}
			else //Otherwise just add to the top level list
				this.dom.push(element);
		}
		else { //There are parent elements
			//If the element can be a container, add it as a child of the element
			//on top of the tag stack and then add it to the tag stack
			if (element.type != ElementType.Text &#x26;&#x26; element.type != ElementType.Comment &#x26;&#x26; element.type != ElementType.Directive) {
				if (element.name.charAt(0) == &#x22;/&#x22;) {
					//This is a closing tag, scan the tagStack to find the matching opening tag
					//and pop the stack up to the opening tag&#x27;s parent
					var baseName = element.name.substring(1);
					if (!this.isEmptyTag(element)) {
						var pos = this._tagStack.length - 1;
						while (pos &#x3e; -1 &#x26;&#x26; this._tagStack[pos--].name != baseName) { }
						if (pos &#x3e; -1 || this._tagStack[0].name == baseName)
							while (pos &#x3c; this._tagStack.length - 1)
								this._tagStack.pop();
					}
				}
				else { //This is not a closing tag
					if (!this._tagStack.last().children)
						this._tagStack.last().children = [];
					this._tagStack.last().children.push(element);
					if (!this.isEmptyTag(element)) //Don&#x27;t add tags to the tag stack that can&#x27;t have children
						this._tagStack.push(element);
				}
			}
			else { //This is not a container element
				if (!this._tagStack.last().children)
					this._tagStack.last().children = [];
				this._tagStack.last().children.push(element);
			}
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.isEmptyTag" id="apidoc.element.htmlparser.DefaultHandler.prototype.isEmptyTag">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>isEmptyTag
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isEmptyTag = function (element) {
		var name = element.name.toLowerCase();
		if (name.charAt(0) == &#x27;/&#x27;) {
			name = name.substring(1);
		}
		return this._options.enforceEmptyTags &#x26;&#x26; !!DefaultHandler._emptyTags[name];
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.reset" id="apidoc.element.htmlparser.DefaultHandler.prototype.reset">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>reset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$reset() {
		this.dom = [];
		this._done = false;
		this._tagStack = [];
		this._tagStack.last = function DefaultHandler$_tagStack$last () {
			return(this.length ? this[this.length - 1] : null);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeComment" id="apidoc.element.htmlparser.DefaultHandler.prototype.writeComment">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeComment
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$writeComment(element) {
		this.handleElement(element);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeDirective" id="apidoc.element.htmlparser.DefaultHandler.prototype.writeDirective">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeDirective
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$writeDirective(element) {
		this.handleElement(element);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeTag" id="apidoc.element.htmlparser.DefaultHandler.prototype.writeTag">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeTag
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$writeTag(element) {
		this.handleElement(element);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DefaultHandler.prototype.writeText" id="apidoc.element.htmlparser.DefaultHandler.prototype.writeText">
        function <span class="apidocSignatureSpan">htmlparser.DefaultHandler.prototype.</span>writeText
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler$writeText(element) {
		if (this._options.ignoreWhitespace)
			if (DefaultHandler.reWhitespace.test(element.data))
				return;
		this.handleElement(element);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.DomUtils" id="apidoc.module.htmlparser.DomUtils">module htmlparser.DomUtils</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.DomUtils.getElementById" id="apidoc.element.htmlparser.DomUtils.getElementById">
        function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElementById
        <span class="apidocSignatureSpan">(id, currentElement, recurse)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DomUtils$getElementById(id, currentElement, recurse) {
			var result = DomUtils.getElements({ id: id }, currentElement, recurse, 1);
			return(result.length ? result[0] : null);
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DomUtils.getElements" id="apidoc.element.htmlparser.DomUtils.getElements">
        function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElements
        <span class="apidocSignatureSpan">(options, currentElement, recurse, limit)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DomUtils$getElements(options, currentElement, recurse, limit) {
			recurse = (recurse === undefined || recurse === null) || !!recurse;
			limit = isNaN(parseInt(limit)) ? -1 : parseInt(limit);

			if (!currentElement) {
				return([]);
			}
	
			var found = [];
			var elementList;

			function getTest (checkVal) {
				return(function (value) { return(value == checkVal); });
			}
			for (var key in options) {
				if ((typeof options[key]) != &#x22;function&#x22;) {
					options[key] = getTest(options[key]);
				}
			}
	
			if (DomUtils.testElement(options, currentElement)) {
				found.push(currentElement);
			}

			if (limit &#x3e;= 0 &#x26;&#x26; found.length &#x3e;= limit) {
				return(found);
			}

			if (recurse &#x26;&#x26; currentElement.children) {
				elementList = currentElement.children;
			} else if (currentElement instanceof Array) {
				elementList = currentElement;
			} else {
				return(found);
			}
	
			for (var i = 0; i &#x3c; elementList.length; i++) {
				found = found.concat(DomUtils.getElements(options, elementList[i], recurse, limit));
				if (limit &#x3e;= 0 &#x26;&#x26; found.length &#x3e;= limit) {
					break;
				}
			}
	
			return(found);
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DomUtils.getElementsByTagName" id="apidoc.element.htmlparser.DomUtils.getElementsByTagName">
        function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElementsByTagName
        <span class="apidocSignatureSpan">(name, currentElement, recurse, limit)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DomUtils$getElementsByTagName(name, currentElement, recurse, limit) {
			return(DomUtils.getElements({ tag_name: name }, currentElement, recurse, limit));
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DomUtils.getElementsByTagType" id="apidoc.element.htmlparser.DomUtils.getElementsByTagType">
        function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>getElementsByTagType
        <span class="apidocSignatureSpan">(type, currentElement, recurse, limit)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DomUtils$getElementsByTagType(type, currentElement, recurse, limit) {
			return(DomUtils.getElements({ tag_type: type }, currentElement, recurse, limit));
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.DomUtils.testElement" id="apidoc.element.htmlparser.DomUtils.testElement">
        function <span class="apidocSignatureSpan">htmlparser.DomUtils.</span>testElement
        <span class="apidocSignatureSpan">(options, element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DomUtils$testElement(options, element) {
			if (!element) {
				return false;
			}
	
			for (var key in options) {
				if (key == &#x22;tag_name&#x22;) {
					if (element.type != &#x22;tag&#x22; &#x26;&#x26; element.type != &#x22;script&#x22; &#x26;&#x26; element.type != &#x22;style&#x22;) {
						return false;
					}
					if (!options[&#x22;tag_name&#x22;](element.name)) {
						return false;
					}
				} else if (key == &#x22;tag_type&#x22;) {
					if (!options[&#x22;tag_type&#x22;](element.type)) {
						return false;
					}
				} else if (key == &#x22;tag_contains&#x22;) {
					if (element.type != &#x22;text&#x22; &#x26;&#x26; element.type != &#x22;comment&#x22; &#x26;&#x26; element.type != &#x22;directive&#x22;) {
						return false;
					}
					if (!options[&#x22;tag_contains&#x22;](element.data)) {
						return false;
					}
				} else {
					if (!element.attribs || !options[key](element.attribs[key])) {
						return false;
					}
				}
			}
		
			return true;
		}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.Parser" id="apidoc.module.htmlparser.Parser">module htmlparser.Parser</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.Parser.Parser" id="apidoc.element.htmlparser.Parser.Parser">
        function <span class="apidocSignatureSpan">htmlparser.</span>Parser
        <span class="apidocSignatureSpan">(handler, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(handler, options) {
	this._options = options ? options : { };
	if (this._options.includeLocation == undefined) {
		this._options.includeLocation = false; //Do not track element position in document by default
	}

	this.validateHandler(handler);
	this._handler = handler;
	this.reset();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var rawHtml = &#x22;Xyz &#x3c;script language= javascript&#x3e;var foo = &#x27;&#x3c;&#x3c;bar&#x3e;&#x3e;&#x27;;&#x3c; /  script
&#x3e;&#x3c;!--&#x3c;!-- Waah! -- --&#x3e;&#x22;;
var handler = new htmlparser.DefaultHandler(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.<span class="apidocCodeKeywordSpan">Parser</span>(handler);
parser.parseComplete(rawHtml);
sys.puts(sys.inspect(handler.dom, false, null));
```

##Usage In Browser

```javascript
...</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.Parser.prototype" id="apidoc.module.htmlparser.Parser.prototype">module htmlparser.Parser.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.done" id="apidoc.element.htmlparser.Parser.prototype.done">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>done
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$done() {
		if (this._done)
			return;
		this._done = true;
	
		//Push any unparsed text into a final element in the element list
		if (this._buffer.length) {
			var rawData = this._buffer;
			this._buffer = &#x22;&#x22;;
			var element = {
				  raw: rawData
				, data: (this._parseState == ElementType.Text) ? rawData : rawData.replace(Parser._reTrim, &#x22;&#x22;)
				, type: this._parseState
				};
			if (this._parseState == ElementType.Tag || this._parseState == ElementType.Script || this._parseState == ElementType.Style)
				element.name = this.parseTagName(element.data);
			this.parseAttribs(element);
			this._elements.push(element);
		}
	
		this.writeHandler();
		this._handler.done();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
##Streaming To Parser

```javascript
while (...) {
	...
	parser.parseChunk(chunk);
}
parser.<span class="apidocCodeKeywordSpan">done</span>();	
```

##Parsing RSS/Atom Feeds

```javascript
new htmlparser.RssHandler(function (error, dom) {
	...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.getLocation" id="apidoc.element.htmlparser.Parser.prototype.getLocation">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>getLocation
        <span class="apidocSignatureSpan">(startTag)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$getLocation(startTag) {
		var c,
			l = this._location,
			end = this._current - (startTag ? 1 : 0),
			chunk = startTag &#x26;&#x26; l.charOffset == 0 &#x26;&#x26; this._current == 0;
		
		for (; l.charOffset &#x3c; end; l.charOffset++) {
			c = this._buffer.charAt(l.charOffset);
			if (c == &#x27;\n&#x27;) {
				l.inBuffer++;
				l.col = 0;
			} else if (c != &#x27;\r&#x27;) {
				l.col++;
			}
		}
		return {
			  line: l.row + l.inBuffer + 1
			, col: l.col + (chunk ? 0: 1)
		};
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.handleError" id="apidoc.element.htmlparser.Parser.prototype.handleError">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>handleError
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$handleError(error) {
		if ((typeof this._handler.error) == &#x22;function&#x22;)
			this._handler.error(error);
		else
			throw error;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.parseAttribs" id="apidoc.element.htmlparser.Parser.prototype.parseAttribs">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseAttribs
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$parseAttribs(element) {
		//Only parse attributes for tags
		if (element.type != ElementType.Script &#x26;&#x26; element.type != ElementType.Style &#x26;&#x26; element.type != ElementType.Tag)
			return;
	
		var tagName = element.data.split(Parser._reWhitespace, 1)[0];
		var attribRaw = element.data.substring(tagName.length);
		if (attribRaw.length &#x3c; 1)
			return;
	
		var match;
		Parser._reAttrib.lastIndex = 0;
		while (match = Parser._reAttrib.exec(attribRaw)) {
			if (element.attribs == undefined)
				element.attribs = {};
	
			if (typeof match[1] == &#x22;string&#x22; &#x26;&#x26; match[1].length) {
				element.attribs[match[1]] = match[2];
			} else if (typeof match[3] == &#x22;string&#x22; &#x26;&#x26; match[3].length) {
				element.attribs[match[3].toString()] = match[4].toString();
			} else if (typeof match[5] == &#x22;string&#x22; &#x26;&#x26; match[5].length) {
				element.attribs[match[5]] = match[6];
			} else if (typeof match[7] == &#x22;string&#x22; &#x26;&#x26; match[7].length) {
				element.attribs[match[7]] = match[7];
			}
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.parseChunk" id="apidoc.element.htmlparser.Parser.prototype.parseChunk">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseChunk
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$parseChunk(data) {
		if (this._done)
			this.handleError(new Error(&#x22;Attempted to parse chunk after parsing already done&#x22;));
		this._buffer += data; //FIXME: this can be a bottleneck
		this.parseTags();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

##Streaming To Parser

```javascript
while (...) {
	...
	parser.<span class="apidocCodeKeywordSpan">parseChunk</span>(chunk);
}
parser.done();	
```

##Parsing RSS/Atom Feeds

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.parseComplete" id="apidoc.element.htmlparser.Parser.prototype.parseComplete">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseComplete
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$parseComplete(data) {
		this.reset();
		this.parseChunk(data);
		this.done();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var handler = new htmlparser.DefaultHandler(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.Parser(handler);
parser.<span class="apidocCodeKeywordSpan">parseComplete</span>(rawHtml);
sys.puts(sys.inspect(handler.dom, false, null));
```

##Usage In Browser

```javascript
var handler = new Tautologistics.NodeHtmlParser.DefaultHandler(function (error, dom) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.parseTagAttribs" id="apidoc.element.htmlparser.Parser.prototype.parseTagAttribs">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseTagAttribs
        <span class="apidocSignatureSpan">(elements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$parseTagAttribs(elements) {
		var idxEnd = elements.length;
		var idx = 0;
	
		while (idx &#x3c; idxEnd) {
			var element = elements[idx++];
			if (element.type == ElementType.Tag || element.type == ElementType.Script || element.type == ElementType.style)
				this.parseAttribs(element);
		}
	
		return(elements);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.parseTagName" id="apidoc.element.htmlparser.Parser.prototype.parseTagName">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseTagName
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$parseTagName(data) {
		if (data == null || data == &#x22;&#x22;)
			return(&#x22;&#x22;);
		var match = Parser._reTagName.exec(data);
		if (!match)
			return(&#x22;&#x22;);
		return((match[1] ? &#x22;/&#x22; : &#x22;&#x22;) + match[2]);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.parseTags" id="apidoc.element.htmlparser.Parser.prototype.parseTags">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>parseTags
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$parseTags() {
		var bufferEnd = this._buffer.length - 1;
		while (Parser._reTags.test(this._buffer)) {
			this._next = Parser._reTags.lastIndex - 1;
			var tagSep = this._buffer.charAt(this._next); //The currently found tag marker
			var rawData = this._buffer.substring(this._current, this._next); //The next chunk of data to parse
	
			//A new element to eventually be appended to the element list
			var element = {
				  raw: rawData
				, data: (this._parseState == ElementType.Text) ? rawData : rawData.replace(Parser._reTrim, &#x22;&#x22;)
				, type: this._parseState
			};
	
			var elementName = this.parseTagName(element.data);
	
			//This section inspects the current tag stack and modifies the current
			//element if we&#x27;re actually parsing a special area (script/comment/style tag)
			if (this._tagStack.length) { //We&#x27;re parsing inside a script/comment/style tag
				if (this._tagStack[this._tagStack.length - 1] == ElementType.Script) { //We&#x27;re currently in a script tag
					if (elementName.toLowerCase() == &#x22;/script&#x22;) //Actually, we&#x27;re no longer in a script tag, so pop it off the stack
						this._tagStack.pop();
					else { //Not a closing script tag
						if (element.raw.indexOf(&#x22;!--&#x22;) != 0) { //Make sure we&#x27;re not in a comment
							//All data from here to script close is now a text element
							element.type = ElementType.Text;
							//If the previous element is text, append the current text to it
							if (this._elements.length &#x26;&#x26; this._elements[this._elements.length - 1].type == ElementType.Text) {
								var prevElement = this._elements[this._elements.length - 1];
								prevElement.raw = prevElement.data = prevElement.raw + this._prevTagSep + element.raw;
								element.raw = element.data = &#x22;&#x22;; //This causes the current element to not be added to the element list
							}
						}
					}
				}
				else if (this._tagStack[this._tagStack.length - 1] == ElementType.Style) { //We&#x27;re currently in a style tag
					if (elementName.toLowerCase() == &#x22;/style&#x22;) //Actually, we&#x27;re no longer in a style tag, so pop it off the stack
						this._tagStack.pop();
					else {
						if (element.raw.indexOf(&#x22;!--&#x22;) != 0) { //Make sure we&#x27;re not in a comment
							//All data from here to style close is now a text element
							element.type = ElementType.Text;
							//If the previous element is text, append the current text to it
							if (this._elements.length &#x26;&#x26; this._elements[this._elements.length - 1].type == ElementType.Text) {
								var prevElement = this._elements[this._elements.length - 1];
								if (element.raw != &#x22;&#x22;) {
									prevElement.raw = prevElement.data = prevElement.raw + this._prevTagSep + element.raw;
									element.raw = element.data = &#x22;&#x22;; //This causes the current element to not be added to the element list
								} else { //Element is empty, so just append the last tag marker found
									prevElement.raw = prevElement.data = prevElement.raw + this._prevTagSep;
								}
							} else { //The previous element was not text
								if (element.raw != &#x22;&#x22;) {
									element.raw = element.data = element.raw;
								}
							}
						}
					}
				}
				else if (this._tagStack[this._tagStack.length - 1] == ElementType.Comment) { //We&#x27;re currently in a comment tag
					var rawLen = element.raw.length;
					if (element.raw.charAt(rawLen - 2) == &#x22;-&#x22; &#x26;&#x26; element.raw.charAt(rawLen - 1) == &#x22;-&#x22; &#x26;&#x26; tagSep == &#x22;&#x3e;&#x22;) {
						//Actually, we&#x27;re no longer in a style tag, so pop it off the stack
						this._tagStack.pop();
						//If the previous element is a comment, append the current text to it
						if (this._elements.length &#x26;&#x26; this._elements[this._elements.length - 1].type == ElementType.Comment) {
							var prevElement = this._elements[this._elements.length - 1];
							prevElement.raw = prevElement.data = (prevElement.raw + element.raw).replace(Parser._reTrimComment, &#x22;&#x22;);
							element.raw = element.data = &#x22;&#x22;; //This causes the current element to not be added to the element list
							element.type = ElementType.Text;
						}
						else //Previous element not a comment
							element.type = ElementType ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.reset" id="apidoc.element.htmlparser.Parser.prototype.reset">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>reset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$reset() {
		this._buffer = &#x22;&#x22;;
		this._done = false;
		this._elements = [];
		this._elementsCurrent = 0;
		this._current = 0;
		this._next = 0;
		this._location = {
			  row: 0
			, col: 0
			, charOffset: 0
			, inBuffer: 0
		};
		this._parseState = ElementType.Text;
		this._prevTagSep = &#x27;&#x27;;
		this._tagStack = [];
		this._handler.reset();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.validateHandler" id="apidoc.element.htmlparser.Parser.prototype.validateHandler">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>validateHandler
        <span class="apidocSignatureSpan">(handler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$validateHandler(handler) {
		if ((typeof handler) != &#x22;object&#x22;)
			throw new Error(&#x22;Handler is not an object&#x22;);
		if ((typeof handler.reset) != &#x22;function&#x22;)
			throw new Error(&#x22;Handler method &#x27;reset&#x27; is invalid&#x22;);
		if ((typeof handler.done) != &#x22;function&#x22;)
			throw new Error(&#x22;Handler method &#x27;done&#x27; is invalid&#x22;);
		if ((typeof handler.writeTag) != &#x22;function&#x22;)
			throw new Error(&#x22;Handler method &#x27;writeTag&#x27; is invalid&#x22;);
		if ((typeof handler.writeText) != &#x22;function&#x22;)
			throw new Error(&#x22;Handler method &#x27;writeText&#x27; is invalid&#x22;);
		if ((typeof handler.writeComment) != &#x22;function&#x22;)
			throw new Error(&#x22;Handler method &#x27;writeComment&#x27; is invalid&#x22;);
		if ((typeof handler.writeDirective) != &#x22;function&#x22;)
			throw new Error(&#x22;Handler method &#x27;writeDirective&#x27; is invalid&#x22;);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.Parser.prototype.writeHandler" id="apidoc.element.htmlparser.Parser.prototype.writeHandler">
        function <span class="apidocSignatureSpan">htmlparser.Parser.prototype.</span>writeHandler
        <span class="apidocSignatureSpan">(forceFlush)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser$writeHandler(forceFlush) {
		forceFlush = !!forceFlush;
		if (this._tagStack.length &#x26;&#x26; !forceFlush)
			return;
		while (this._elements.length) {
			var element = this._elements.shift();
			switch (element.type) {
				case ElementType.Comment:
					this._handler.writeComment(element);
					break;
				case ElementType.Directive:
					this._handler.writeDirective(element);
					break;
				case ElementType.Text:
					this._handler.writeText(element);
					break;
				default:
					this._handler.writeTag(element);
					break;
			}
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.RssHandler" id="apidoc.module.htmlparser.RssHandler">module htmlparser.RssHandler</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.RssHandler.RssHandler" id="apidoc.element.htmlparser.RssHandler.RssHandler">
        function <span class="apidocSignatureSpan">htmlparser.</span>RssHandler
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RssHandler(callback) {
	RssHandler.super_.call(this, callback, { ignoreWhitespace: true, verbose: false, enforceEmptyTags: false });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
parser.done();	
```

##Parsing RSS/Atom Feeds

```javascript
new htmlparser.<span class="apidocCodeKeywordSpan">RssHandler</span>(function (error, dom) {
	...
});
```

##DefaultHandler Options

###Usage
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.RssHandler.super_" id="apidoc.element.htmlparser.RssHandler.super_">
        function <span class="apidocSignatureSpan">htmlparser.RssHandler.</span>super_
        <span class="apidocSignatureSpan">(callback, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler(callback, options) {
	this.reset();
	this._options = options ? options : { };
	if (this._options.ignoreWhitespace == undefined)
		this._options.ignoreWhitespace = false; //Keep whitespace-only text nodes
	if (this._options.verbose == undefined)
		this._options.verbose = true; //Keep data property for tags and raw property for all
	if (this._options.enforceEmptyTags == undefined)
		this._options.enforceEmptyTags = true; //Don&#x27;t allow children for HTML tags defined as empty in spec
	if ((typeof callback) == &#x22;function&#x22;)
		this._callback = callback;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.RssHandler.prototype" id="apidoc.module.htmlparser.RssHandler.prototype">module htmlparser.RssHandler.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.RssHandler.prototype.constructor" id="apidoc.element.htmlparser.RssHandler.prototype.constructor">
        function <span class="apidocSignatureSpan">htmlparser.RssHandler.prototype.</span>constructor
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RssHandler(callback) {
	RssHandler.super_.call(this, callback, { ignoreWhitespace: true, verbose: false, enforceEmptyTags: false });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.RssHandler.prototype.done" id="apidoc.element.htmlparser.RssHandler.prototype.done">
        function <span class="apidocSignatureSpan">htmlparser.RssHandler.prototype.</span>done
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RssHandler$done() {
		var feed = { };
		var feedRoot;

		var found = DomUtils.getElementsByTagName(function (value) { return(value == &#x22;rss&#x22; || value == &#x22;feed&#x22;); }, this.dom, false);
		if (found.length) {
			feedRoot = found[0];
		}
		if (feedRoot) {
			if (feedRoot.name == &#x22;rss&#x22;) {
				feed.type = &#x22;rss&#x22;;
				feedRoot = feedRoot.children[0]; //&#x3c;channel/&#x3e;
				feed.id = &#x22;&#x22;;
				try {
					feed.title = DomUtils.getElementsByTagName(&#x22;title&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				try {
					feed.link = DomUtils.getElementsByTagName(&#x22;link&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				try {
					feed.description = DomUtils.getElementsByTagName(&#x22;description&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				try {
					feed.updated = new Date(DomUtils.getElementsByTagName(&#x22;lastBuildDate&#x22;, feedRoot.children, false)[0].children[0].data);
				} catch (ex) { }
				try {
					feed.author = DomUtils.getElementsByTagName(&#x22;managingEditor&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				feed.items = [];
				DomUtils.getElementsByTagName(&#x22;item&#x22;, feedRoot.children).forEach(function (item, index, list) {
					var entry = {};
					try {
						entry.id = DomUtils.getElementsByTagName(&#x22;guid&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.title = DomUtils.getElementsByTagName(&#x22;title&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.link = DomUtils.getElementsByTagName(&#x22;link&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.description = DomUtils.getElementsByTagName(&#x22;description&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.pubDate = new Date(DomUtils.getElementsByTagName(&#x22;pubDate&#x22;, item.children, false)[0].children[0].data);
					} catch (ex) { }
					feed.items.push(entry);
				});
			} else {
				feed.type = &#x22;atom&#x22;;
				try {
					feed.id = DomUtils.getElementsByTagName(&#x22;id&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				try {
					feed.title = DomUtils.getElementsByTagName(&#x22;title&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				try {
					feed.link = DomUtils.getElementsByTagName(&#x22;link&#x22;, feedRoot.children, false)[0].attribs.href;
				} catch (ex) { }
				try {
					feed.description = DomUtils.getElementsByTagName(&#x22;subtitle&#x22;, feedRoot.children, false)[0].children[0].data;
				} catch (ex) { }
				try {
					feed.updated = new Date(DomUtils.getElementsByTagName(&#x22;updated&#x22;, feedRoot.children, false)[0].children[0].data);
				} catch (ex) { }
				try {
					feed.author = DomUtils.getElementsByTagName(&#x22;email&#x22;, feedRoot.children, true)[0].children[0].data;
				} catch (ex) { }
				feed.items = [];
				DomUtils.getElementsByTagName(&#x22;entry&#x22;, feedRoot.children).forEach(function (item, index, list) {
					var entry = {};
					try {
						entry.id = DomUtils.getElementsByTagName(&#x22;id&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.title = DomUtils.getElementsByTagName(&#x22;title&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.link = DomUtils.getElementsByTagName(&#x22;link&#x22;, item.children, false)[0].attribs.href;
					} catch (ex) { }
					try {
						entry.description = DomUtils.getElementsByTagName(&#x22;summary&#x22;, item.children, false)[0].children[0].data;
					} catch (ex) { }
					try {
						entry.pubDate = new Date(DomUtils.getElementsByTagName(&#x22;updated&#x22;, item.children, false)[0].children[0].data);
					} catch (ex) { }
					feed.items.push(entry);
				});
			}

			this.dom = feed;
		}
		RssHandler.super_.prototype.done.call(this);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
##Streaming To Parser

```javascript
while (...) {
	...
	parser.parseChunk(chunk);
}
parser.<span class="apidocCodeKeywordSpan">done</span>();	
```

##Parsing RSS/Atom Feeds

```javascript
new htmlparser.RssHandler(function (error, dom) {
	...
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.htmlparser.node_htmlparser" id="apidoc.module.htmlparser.node_htmlparser">module htmlparser.node_htmlparser</a></h1>


    <h2>
        <a href="#apidoc.element.htmlparser.node_htmlparser.DefaultHandler" id="apidoc.element.htmlparser.node_htmlparser.DefaultHandler">
        function <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>DefaultHandler
        <span class="apidocSignatureSpan">(callback, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DefaultHandler(callback, options) {
	this.reset();
	this._options = options ? options : { };
	if (this._options.ignoreWhitespace == undefined)
		this._options.ignoreWhitespace = false; //Keep whitespace-only text nodes
	if (this._options.verbose == undefined)
		this._options.verbose = true; //Keep data property for tags and raw property for all
	if (this._options.enforceEmptyTags == undefined)
		this._options.enforceEmptyTags = true; //Don&#x27;t allow children for HTML tags defined as empty in spec
	if ((typeof callback) == &#x22;function&#x22;)
		this._callback = callback;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
View runtests.html in any browser

##Usage In Node

```javascript
var htmlparser = require(&#x22;htmlparser&#x22;);
var rawHtml = &#x22;Xyz &#x3c;script language= javascript&#x3e;var foo = &#x27;&#x3c;&#x3c;bar&#x3e;&#x3e;&#x27;;&#x3c; /  script
&#x3e;&#x3c;!--&#x3c;!-- Waah! -- --&#x3e;&#x22;;
var handler = new htmlparser.<span class="apidocCodeKeywordSpan">DefaultHandler</span>(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.Parser(handler);
parser.parseComplete(rawHtml);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.node_htmlparser.Parser" id="apidoc.element.htmlparser.node_htmlparser.Parser">
        function <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>Parser
        <span class="apidocSignatureSpan">(handler, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(handler, options) {
	this._options = options ? options : { };
	if (this._options.includeLocation == undefined) {
		this._options.includeLocation = false; //Do not track element position in document by default
	}

	this.validateHandler(handler);
	this._handler = handler;
	this.reset();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var rawHtml = &#x22;Xyz &#x3c;script language= javascript&#x3e;var foo = &#x27;&#x3c;&#x3c;bar&#x3e;&#x3e;&#x27;;&#x3c; /  script
&#x3e;&#x3c;!--&#x3c;!-- Waah! -- --&#x3e;&#x22;;
var handler = new htmlparser.DefaultHandler(function (error, dom) {
	if (error)
		[...do something for errors...]
	else
		[...parsing done, do something...]
});
var parser = new htmlparser.<span class="apidocCodeKeywordSpan">Parser</span>(handler);
parser.parseComplete(rawHtml);
sys.puts(sys.inspect(handler.dom, false, null));
```

##Usage In Browser

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.htmlparser.node_htmlparser.RssHandler" id="apidoc.element.htmlparser.node_htmlparser.RssHandler">
        function <span class="apidocSignatureSpan">htmlparser.node_htmlparser.</span>RssHandler
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RssHandler(callback) {
	RssHandler.super_.call(this, callback, { ignoreWhitespace: true, verbose: false, enforceEmptyTags: false });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
parser.done();	
```

##Parsing RSS/Atom Feeds

```javascript
new htmlparser.<span class="apidocCodeKeywordSpan">RssHandler</span>(function (error, dom) {
	...
});
```

##DefaultHandler Options

###Usage
...</pre></li>
    </ul>






</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
